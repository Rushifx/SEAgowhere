<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>SEAGoWhere - Sign Up</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous" />
    <link rel="stylesheet" href="./css/style.css">

    <!-- link to bootstrap icons library -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css"
        integrity="sha512-Kc323vGBEqzTmouAECnVceyQqyqdsSiqLQISBL29aUW4U/M7pSPA/gEUZQqv1cwx4OnYxTxve5UMg5GT6L4JJg=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />

</head>

<body>
    <!-- toast -->
    <!-- https://getbootstrap.com/docs/5.3/components/toasts/ -->
    <div class="toast-container p-3 top-0 start-50 translate-middle-x">
        <!-- Put toasts within -->
        <div id="msg-toast" class="toast align-items-center mt-2" role="alert" aria-live="assertive" aria-atomic="true"
            data-bs-autohide="true" data-bs-delay="4000">
            <div class="d-flex">
                <div id="msg-toast-body" class="toast-body">
                    <!-- Message to be added here -->
                </div>
                <button type="button" class="btn-close me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
            </div>
        </div>
    </div>
    <!-- End of toast -->
    <div class="min-vh-75 bg-body-secondary">
        <!-- Navigation Bar -->
        <nav class="navbar navbar-expand-sm">
            <div class="container-fluid">
                <a class="navbar-brand" href="index.html"><img src="img/logo.png" class="p-1" alt="company logo" height="100"></a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav ms-auto">
                        <li class="nav-item dropdown" id="dropdown_generator">
                            <a class="nav-link dropdown-toggle fw-bolder" href="#" id="experiencesDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                                Experiences
                            </a>
                        </li>
                        <li class="nav-item fw-bolder">
                            <a class="nav-link" href="packages.html">Featured Trips</a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
    </div>

    <!-- Header -->

    <!-- End of Header -->
    <!-- Start of mainsection -->
    <section id="mainsection-login">
        <div class="container w-50 login">

            <div>
                <h1 class="display-4 text-black fw-medium text-center">Ready to go?</h1>
            </div>

            <form id="formSignup" class="needs-validation" novalidate>
                <!-- Name input -->
                <div class="row justify-content-center mt-1">
                    <div class="col-lg-4 col-md-4 col-sm-4">
                        <label class="form-label fw-lighter" for="txtFirstName">First Name:</label>
                        <input type="text" id="txtFirstName" class="form-control" required />
                        <div class="invalid-feedback text-red">
                            Please enter your first name.
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-4 col-sm-4">
                        <label class="form-label fw-lighter" for="txtLastName">Last Name:</label>
                        <input type="text" id="txtLastName" class="form-control" required />
                        <div class="invalid-feedback text-red">
                            Please enter your last name.
                        </div>
                    </div>
                </div>

                <!-- Email input -->
                <div class="row justify-content-center mt-1">
                    <div class="col-lg-8 col-md-8 col-sm-8">
                        <label class="form-label fw-lighter" for="txtEmail">Email:</label>
                        <input type="email" id="txtEmail" class="form-control" required />
                        <div class="invalid-feedback text-red">
                            Please enter a valid email.
                        </div>
                    </div>
                </div>

                <!-- Password input -->
                <div class="row justify-content-center mt-1">
                    <div class="col-lg-8 col-md-8 col-sm-8">
                        <label class="form-label fw-lighter" for="txtPassword">Password:</label>
                        <input type="password" id="txtPassword" class="form-control" required />
                        <div class="invalid-feedback text-red">
                            Please enter a password.
                        </div>
                    </div>
                </div>

                <!-- Submit button -->
                <div class="d-flex justify-content-center pt-4 formBtn">
                    <button type="submit" id="btnSignup" class="btn btn-primary btn-block ms-2">
                        Sign Up
                    </button>
                    <button type="reset" id="btnReset" class="btn btn-secondary btn-block ms-2">Reset</button>
                </div>
            </form>

        </div>
    </section>
    <!-- End of mainsection -->

    <!-- Start of footer -->

    <!-- Main Footer -->
    <!-- https://mdbootstrap.com/docs/standard/navigation/footer/ -->
    <footer class="text-center footer-container">
        <!-- Grid container -->
        <div class="container p-2">

            <!-- Section: Form -->
            <section class="form">
                <form action="">
                    <!--Grid row-->
                    <div class="row d-flex justify-content-center pt-2 align-items-center">
                        <!--Grid column-->
                        <div class="col-auto">
                            <img src="img/logo2-transparent.png" alt="SEAGoWhere logo" class="footer-logo">
                        </div>
                        <!--Grid column-->

                        <!--Grid column-->
                        <div class="col-md-5 col-12 newsletter">
                            <!-- Email input -->
                            <div data-mdb-input-init class="form-outline mb-4">
                                <p class="pt-2">
                                    Sign up for our newsletter
                                </p>
                                <button class="open" id="open">Click Here</button>
                            </div>
                        </div>
                        <!--Grid column-->

                        <!--Grid column-->
                        <div class="col-lg-2 col-md-6 mb-4 mb-md-0">
                            <h5 class="text-uppercase mb-4">Links</h5>

                            <ul class="list-unstyled mb-0 links">
                                <li>
                                    <a class="text-decoration-none" href="about.html">About Us</a>
                                </li>
                                <li>
                                    <a class="text-decoration-none" href="contact.html">Contact Us</a>
                                </li>
                            </ul>
                        </div>
                        <!--Grid column-->

                    </div>
                    <!--Grid row-->
                </form>
            </section>
            <!-- Section: Form -->

        </div>
        <!-- Grid container -->

        <!-- Section: Social media -->
        <section class="mb-4">
            <!-- Facebook -->
            <a data-mdb-ripple-init class="btn btn-outline btn-floating m-1" href="#!" role="button"><i
                    class="fab fa-facebook-f"></i></a>

            <!-- Twitter -->
            <a data-mdb-ripple-init class="btn btn-outline btn-floating m-1" href="#!" role="button"><i
                    class="fab fa-twitter"></i></a>

            <!-- Google -->
            <a data-mdb-ripple-init class="btn btn-outline btn-floating m-1" href="#!" role="button"><i
                    class="fab fa-google"></i></a>

            <!-- Instagram -->
            <a data-mdb-ripple-init class="btn btn-outline btn-floating m-1" href="#!" role="button"><i
                    class="fab fa-instagram"></i></a>

            <!-- Linkedin -->
            <a data-mdb-ripple-init class="btn btn-outline btn-floating m-1" href="#!" role="button"><i
                    class="fab fa-linkedin-in"></i></a>

            <!-- Github -->
            <a data-mdb-ripple-init class="btn btn-outline btn-floating m-1" href="#!" role="button"><i
                    class="fab fa-github"></i></a>
        </section>
        <!-- Section: Social media -->

        <!-- Copyright -->
        <div class="text-center p-2">
            &copy; 2024 Copyright:
            <a class="text-decoration-none copyright" href="index.html">SeaGoWhere</a>
        </div>
        <!-- Copyright -->
    </footer>

    <!-- Modal -->
    <div class="modal-container" id="modal_container">
        <div class="modal footer-modal">
            <button class="close" id="close"><span aria-hidden="true">&times;</span></button>
            <img src="img/footer/modal-img.jpg" alt="Bali Waterfall">
            <div class="modal-content footer-modal-content">
                <!-- Subscription form -->
                <div id="subscribe-content">
                    <form id="form" action="#">
                        <h1>Join Our Newsletter</h1>
                        <p>Lorem ipsum, dolor sit amet consectetur adipisicing elit. Tempore neque nemo ea libero unde
                            fugit
                            obcaecati, facere eius harum officiis!</p>
                        <div class="input-control">
                            <label for="firstName">First name:</label>
                            <input type="text" id="firstName" name="firstName" />
                            <div class="error"></div>
                        </div>
                        <div class="input-control">
                            <label for="lastName">Last name:</label>
                            <input type="text" id="lastName" name="lastName" />
                            <div class="error"></div>
                        </div>
                        <div class="input-control">
                            <label for="newsEmail">Email:</label>
                            <input type="text" id="newsEmail" class="form-control" placeholder="e.g. john.doe@email.com"
                                name="newsEmail">
                            <div class="error"></div>
                        </div>
                        <button data-mdb-ripple-init type="submit" class="btn btn-outline" aria-hidden="true">
                            Subscribe
                        </button>
                    </form>
                </div>
                <!-- Thank You message -->
                <div id="thank-you-content" style="display: none;">
                    <h1>Thank you for subscribing to our newsletter!</h1>
                    <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Illo, dolore.</p>
                </div>
            </div>
        </div>
    </div>
    <!-- End of footer -->

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
    <script src="js/Modal.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/5.3.0/js/bootstrap.min.js"></script>

    <script src="js/Mock.js"></script> <!-- TODO: to remove in production env. -->
    <script src="js/const.js"></script>

    <script src="js/auth.js"></script>
    <script src="js/components/NavController.js"></script>
    <script src="js/components/Spinner.js"></script>
    <script src="js/loader.js"></script>

    <script src="js/boostrap-ftns.js"></script>
    <script src="js/form-validate.js"></script>

    <!-- Internal Custom Script -->
    <script>

        // Custom JS statements and function
        document.getElementById("formSignup").addEventListener("submit", async (event) => {

            event.preventDefault();                                                 // Prevent default browser events from happening

            const email = document.getElementById("txtEmail");                      // Create constant variables to capture form inputs - txtEmail
            const pwd = document.getElementById("txtPassword");                     // Create constant variables to capture form inputs - txtPassword
            const firstName = document.getElementById("txtFirstName");              // Create constant variables to capture form inputs - txtFirstName
            const lastName = document.getElementById("txtLastName");               // Create constant variables to capture form inputs - txtLasttName

            const toastElement = document.getElementById("msg-toast");              // Get the toast element - msg-toast
            const toastBodyElement = document.getElementById("msg-toast-body");     // Get the toast element - msg-toast-body

            if (isEmpty(email.value) || isEmpty(pwd.value) || isEmpty(firstName.value) || isEmpty(lastName.value)) {      // Trap empty inputs - isEmpty()
                showToast({
                    toastElement,
                    toastBodyElement,
                    bgColor: "danger", msg: "All inputs must not be empty."
                });
                return;
            }

            if (!isEmail(email.value)) {                                              // Trap invalid email for txtEmail - isEmail()
                showToast({
                    toastElement,
                    toastBodyElement,
                    bgColor: "danger", msg: "Email is invalid."
                });
                return;
            }

            spinner.createSpinner("btnSignup");                                      // Create the spinner, apply it to btnSignup
            spinner.displaySpinner(true);

            const formData = {firstName: firstName.value, lastName: lastName.value, email: email.value, password: pwd.value, role: "USER"};           // JavaScript Object formData stores the form's input values

            const signUpSuccess = await signup(formData);                             // Invoke signup() function, and end (return)

            if (!signUpSuccess) {
                spinner.displaySpinner(false);                                                                          // If signup unsuccessful, hide spinner
                showToast({ toastElement, toastBodyElement, bgColor: "danger", msg: "Unable to log in. Try again." });    // If signup unsuccessful, provide feeback
            }

        });

    </script>
</body>

</html>